<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

        const devolverCuadrados = (arr = undefined) => {
            if (arr === undefined) return console.warn("No ingreso valor");

            if (!(arr instanceof Array)) return console.error("El valor no es correcto");

            if (arr.length === 0) return console.error("El arreglo esta vacio");


            for (let num of arr) {
                if(typeof num !== "number") return console.error(`El valor "${num}" ingresado, No es un numero`);

                }

                const newArr = arr.map(el => el * el);

                return console.info(`Arreglo original: ${arr},\nArreglo elevado al cuadrado: ${newArr}`)
        }

        //devolverCuadrados();
        //devolverCuadrados(true);
        //devolverCuadrados({});
        //devolverCuadrados([])
        //devolverCuadrados([1,3,4,{}])
        devolverCuadrados([1,4,8]);


        const arrayMinMax = (arr = undefined) => {
            if (arr === undefined) return console.warn("No ingreso valor");

            if (!(arr instanceof Array)) return console.error("El valor no es correcto");

            if (arr.length === 0) return console.error("El arreglo esta vacio");


            for (let num of arr) {
                if(typeof num !== "number") return console.error(`El valor "${num}" ingresado, No es un numero`);

                }

                return console.info(`Arreglo original: ${arr}\nValor mayor: ${Math.max(...arr)},\nValor Min: ${Math.min(...arr)}`);
        }


        //arrayMinMax();
        //arrayMinMax(false);
        //arrayMinMax([])
        //arrayMinMax([2,3,true]);
        arrayMinMax([1,2,5,99,-60]);




        const seprarParesImpares = (arr = undefined) => {
            if (arr === undefined) return console.warn("No ingreso valor");

            if (!(arr instanceof Array)) return console.error("El valor no es correcto");

            if (arr.length === 0) return console.error("El arreglo esta vacio");


            for (let num of arr) {
                if(typeof num !== "number") return console.error(`El valor "${num}" ingresado, No es un numero`);

                }

            return console.info({
                pares: arr.filter(num => num % 2 === 0),
                impares: arr.filter(num => num % 2 === 1)
            }
                
            )

        
        }

        //seprarParesImpares();
        //seprarParesImpares("hola");
        //seprarParesImpares([]);
        //seprarParesImpares([2,4,"j"])
        seprarParesImpares([1,2,3,4,5,6,7,8,9,0])




        const ordenarArreglo = (arr = undefined) => {
            if (arr === undefined) return console.warn("No ingreso valor");

            if (!(arr instanceof Array)) return console.error("El valor no es correcto");

            if (arr.length === 0) return console.error("El arreglo esta vacio");


            for (let num of arr) {
                if(typeof num !== "number") return console.error(`El valor "${num}" ingresado, No es un numero`);

                }

                return console.info({
                    arr,
                    asc: arr.map(el => el).sort(),
                    desc: arr.map(el => el).sort().reverse()
                }
                )
        }

        //ordenarArreglo();
        //ordenarArreglo("Hola");
        //ordenarArreglo([]);
        //ordenarArreglo([3,{}]);
        ordenarArreglo([7,5,7,8,6]);


        const quitarDuplicados = (arr = undefined) => {
            if (arr === undefined) return console.warn("No ingreso valor");

            if (!(arr instanceof Array)) return console.error("El valor no es correcto");

            if (arr.length === 0) return console.error("El arreglo esta vacio");

            if (arr.length === 1) return console.error("El arreglo debe tener 2 o mas elemntos");


            /*return console.info({
                original: arr,
                sinDuplicado: arr.filter((value,index,self)=> self.indexOf(value) === index)
            })*/
            return console.info({
                original: arr,
                sinDuplicado: [... new Set(arr)]
            })
        }

        //quitarDuplicados([2]);
        quitarDuplicados(["x",10,"x",2,"10",10,true,true]);


        const promedio = (arr = undefined) => {
            if (arr === undefined) return console.warn("No ingreso valor");

            if (!(arr instanceof Array)) return console.error("El valor no es correcto");

            if (arr.length === 0) return console.error("El arreglo esta vacio");


            for (let num of arr) {
                if(typeof num !== "number") return console.error(`El valor "${num}" ingresado, No es un numero`);

                }

                return console.info(
                  arr.reduce((total,num,index,arr) => {
                      total += num;
                      if(index === arr.length-1){
                          return `El promedio de ${arr.join(" + ")} es ${total / arr.length}`;
                      }else{
                          return total;
                      }
                  })
                    
                )
        }

        //promedio();
        //promedio({});
        //promedio([]);
        //promedio([2,true]);
        promedio([1,2,3,4,5,6,7,8,9,0]);




        class Pelicula { 
            constructor({id, titulo, director, estreno, pais, generos, calificacion}){
              this.id = id;
              this.titulo = titulo;
              this.director = director;
              this.estreno = estreno;
              this.pais = pais;
              this.generos = generos;
              this.calificacion = calificacion;

              this.validarIMDB(id);
              this.validarTitulo(titulo);
              this.validarDirector(director);
              this.validarEstreno(estreno);
              this.validarPais(pais);
              this.validarGeneros(generos);
              this.validarCalificacion(calificacion);
            }

            static get listaGeneros(){
                return ["Action", "Adult", "Adventure", "Animation", "Biography", "Comedy", "Crime", "Documentary" ,"Drama", "Family", "Fantasy", "Film Noir", "Game-Show", "History", "Horror", "Musical", "Music", "Mystery", "News", "Reality-TV", "Romance", "Sci-Fi", "Short", "Sport", "Talk-Show", "Thriller", "War", "Western"]
            }

            static generosAceptados(){
                return console.info(`Los generos aceptados son: ${Pelicula.listaGeneros.join(",")}`)
            }

            validarCadena(propiedad,valor){
                if(!valor) return console.warn(`${propiedad} "${valor}" esta vacio`);

                if (typeof valor !== "string") return console.error(`${propiedad} "${valor}" ingresado,No es una cadena de texto`);

                return true;

            }

            validarLongitudCadena(propiedad,valor,longitud){
                if (valor.length > longitud) return console.error(`${propiedad} "${valor}" excede el numero de caracteres permitidos (${longitud}).`);

                return true;
            }

            validarNumero(propiedad,valor){
                if(!valor) return console.warn(`${propiedad} "${valor}" esta vacio`);

                if (typeof valor !== "number") return console.error(`${propiedad} "${valor}" ingresado,No es un numero`);

                return true;

            }
            
            validarArreglo(propiedad,valor){
                if(!valor) return console.warn(`${propiedad} "${valor}" esta vacio`);

                if (!(valor instanceof Array)) return console.error(`${propiedad} "${valor}" ingresado,No es un arreglo`);

                if (valor.length === 0) return console.error(`${propiedad} "${valor}" No tiene datos`);

                for(let cadena of valor){
                    if(typeof cadena !== "string") return console.error(`El valor "${cadena} ingresado no es un valor de una cadena de texto`);

                }

                return true;

            }


            validarIMDB(id){
                if (this.validarCadena("IMDB id",id))
                    if (!(/^([a-z]){2}([0-9]){7}$/.test(id)))
                        return console.error(`IMDB id "${id}" no es valido, debe tener 9 caracteres, los 2 primeros letras minusculas, los 7 restantes numeros`);
            }

            validarTitulo(titulo){
                if (this.validarCadena("Titulo",titulo))
                 this.validarLongitudCadena("Titulo",titulo,100);
            }

            validarDirector(director){
                if (this.validarCadena("Director",director))
                 this.validarLongitudCadena("Director",director,50);
            }

            validarEstreno(estreno){
                if (this.validarNumero("Año de estreno",estreno))
                    if (!(/^([0-9]){4}$/.test(estreno)))
                        return console.error(`Año de estreno "${estreno}" no es valido`);
            }


            validarPais(pais){
                this.validarArreglo("Pais",pais)
            }


            validarGeneros(generos){
              if(this.validarArreglo("Generos",generos)){
                  for (let genero of generos){
                      //console.log(genero, Pelicula.listaGeneros.includes(genero));

                      if(!Pelicula.listaGeneros.includes(genero)){
                          console.error(`Genero(s) incorrectos "${generos.join(",")}"`);
                          Pelicula.generosAceptados();
                      }
                  }
              }
            }

            validarCalificacion(calificacion){
                if (this.validarNumero("Calificacion",calificacion));
                return (calificacion < 0 || calificacion > 10)
                ? console.error(`La calificacion debe de estar entre un rango de 0 y 10`)
                : this.calificacion = calificacion.toFixed(1);
            
            }

            fichaTecnica(){
                console.info(`Ficha Tecnica:\nTitulos: "${this.titulo}"\nDirector:"${this.director}"\nAño: "${this.estreno}"\nPais: "${this.pais.join("-")}"\nGeneros: "${this.generos.join(",")}"\nCalificacion: "${this.calificacion}"\nIMDB id: "${this.id}"`)
            }


        }

        //Pelicula.generosAceptados();
        /*const peli = new Pelicula({
            id: "tt1234567",
            titulo: "Titulo de la peli",
            director: "Director de la peli",
            estreno: 2020,
            pais: ["Colombia","Japon"],
            generos: ["Comedy"],
            calificacion: 7.78,

        })

        peli.fichaTecnica();*/

        const misPelis = [
            {
                id: "tt1234567",
            titulo: "Titulo de la peli",
            director: "Director de la peli",
            estreno: 2020,
            pais: ["Colombia","Japon"],
            generos: ["Comedy"],
            calificacion: 7.78,   
            },
            {
                id: "tt6589145",
            titulo: "Titulo de la peli",
            director: "Director de la peli",
            estreno: 2020,
            pais: ["Colombia","Japon"],
            generos: ["Comedy"],
            calificacion: 7.78,   
            },
            {
                id: "tt1236567",
            titulo: "Titulo de la peli",
            director: "Director de la peli",
            estreno: 2020,
            pais: ["Colombia","Japon"],
            generos: ["Comedy"],
            calificacion: 7.78,   
            }
        ];

        misPelis.forEach(el => new Pelicula(el).fichaTecnica());

        









    </script>
</body>
</html>